(function(b,a){if(typeof exports==="object"){module.exports=a()}else{if(typeof define==="function"&&define.amd){define(a)}else{b.MyApp=a()}}})(this,function(){function a(c){this.string=c;this.tail=c;this.pos=0}a.prototype={eos:function(){return this.tail===""},scan:function(e){var d=this.tail.match(e);if(!d||d.index!==0){return false}var c=d[0];this.tail=this.tail.substring(c.length);this.pos+=c.length;return d[0]},scanUntil:function(f){var c,e,d=this.tail.match(f);if(d===null){c=this.tail;this.tail="";this.pos+=c.length;return c}e=d.index;c=this.tail.substring(0,e);this.tail=this.tail.substring(e);this.pos+=e;return c}};var b={};b.read=function(i){var e={},f=/[\n\r;]|(\}\})/,h=/[\n\r;]/,g=function(m){var l,j=e;m=m.split(".");while(l=m.shift()){if(typeof j[l]==="undefined"){throw new Error("There is no variable")}j=j[l]}return j},d=function(j){j=j.replace(/(^\s*)|(\s*$)/g,"");if(/^true$/i.test(j)){return true}if(/^false$/i.test(j)){return false}if(/^null$/i.test(j)){return null}if(/^(0|[1-9][0-9]*)$/.test(j)){return parseInt(j)}if(/^"((?:[^"]|\\")*)"$/.test(j)){return j.slice(1,-1).replace(/\\"/,'"').replace(/\\n/,"\n")}if(/^'([^']*)'$/.test(j)){return j.slice(1,-1)}if(/^([a-zA-Z_][a-zA-Z0-9_]*)(\.(([a-zA-Z_][a-zA-Z0-9_]*)|(0|[1-9][0-9]*)))*$/.test(j)){try{return g(j)}catch(k){return}}throw new Error("알 수 없는 타입")},c=function(j){return j[j.length-1]};return{assign:function(j,k){e[j]=k},render:function(s){var j=process.hrtime();var n=new a("}}"+i+"{{"),u="",p,q={type:0,is_print:true},r=[];r.push(q);while(!n.eos()){if(n.scan(/^\s*\}\}/)){p=n.scanUntil(/\{\{/);if(q.is_print){u+=p}n.scan(/\{\{\s*/);continue}if(n.scan(/^\s*--/)){p=n.scanUntil(f);n.scan(h);continue}if(n.scan(/^\s*\=\s*/)){p=n.scanUntil(f);if(q.is_print){p=d(p);if(typeof p!=="undefined"&&p!==null){u+=p.toString()}}n.scan(h);continue}if(n.scan(/^\s*\?/)){p=n.scanUntil(f);p=d(p);if(p){q={type:1,is_print:q.is_print,status:1}}else{q={type:1,is_print:false,status:0}}r.push(q);n.scan(h);continue}if(n.scan(/^\s*\@/)){p=n.scanUntil(f);var o=p.split("->"),m=o[1],k=d(o[0]),t=k.length;if(Object(k)!==k){throw new Error("loop를 사용할 수 없는 형태의 변수입니다.")}if(t===0||q.is_print===false){q={type:2,is_print:false,status:1}}else{e[m]=k[0];q={type:2,is_print:q.is_print,status:0,tail:n.tail,pos:n.pos,iterator:{name:m,value:k,len:t,i:0}}}r.push(q);n.scan(h);continue}switch(q.type){case 1:if(n.scan(/^\s*\:\?/)){p=n.scanUntil(f);if(q.status===1){q.is_print=false}else{p=d(p);if(p){q.is_print=true;q.status=1}}n.scan(h)}if(n.scan(/^\s*\:/)){if(q.status===1){q.is_print=false}else{q.is_print=true}n.scan(h)}if(n.scan(/^\s*\//)){r.pop();q=c(r);n.scan(h)}break;case 2:if(n.scan(/^\s*\//)){if(q.status===0){var o=q.iterator;o.i++;if(o.i<o.len){e[o.name]=o.value[o.i];n.tail=q.tail;n.pos=q.pos}else{q.status=1}}if(q.status===1){r.pop();q=c(r);n.scan(h)}}break}}var l=process.hrtime();console.log("Runtime : ",l[0]-j[0]+(l[1]-j[1])/1000000000);return u}}};return b});